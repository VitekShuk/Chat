(this.webpackJsonpblablachatfe=this.webpackJsonpblablachatfe||[]).push([[0],{102:function(e,a,t){e.exports=t(145)},142:function(e,a){},145:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),c=t(10),i=t.n(c),s=t(15),l=t(184),m=t(183),u=t(177),d=t(180),g=t(178),p=t(47),f=t.n(p),E=t(147),h=t(14),v=t.n(h),b=t(175),w=t(179);!function(e){e.SIGNIN="SIGNIN",e.SIGNUP="SIGNUP",e.CHAT="CHAT"}(n||(n={}));var N="http://localhost:80/",x=t(173),S=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),O=Object(x.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minWidth:"288px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},buttonOut:{position:"absolute"},messageInfo:{color:"rgba(0, 0, 0, 0.5)"},messageBox:{overflowX:"hidden",overflowY:"auto"},message:{marginBottom:"14px",marginLeft:"10px",marginRight:"10px",maxWidth:"458px",wordWrap:"break-word"},userLogin:{marginLeft:"auto",marginRight:0,fontSize:16}}}));function C(e){var a=e.setPage,t=S(),c=Object(r.useState)(""),i=Object(s.a)(c,2),p=i[0],h=i[1],x=Object(r.useState)(""),O=Object(s.a)(x,2),C=O[0],j=O[1],k=Object(r.useState)(""),y=Object(s.a)(k,2),I=y[0],W=y[1],P=function(e){var a=e.target,t=a.value,n=a.name;"login"===n&&h(t),"password"===n&&j(t),"repeat password"===n&&W(t)};return o.a.createElement(b.a,{component:"main",maxWidth:"xs"},o.a.createElement(u.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(l.a,{className:t.avatar},o.a.createElement(f.a,null)),o.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign up"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"username",value:p,onChange:P})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:C,onChange:P})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"repeat password",label:"Repeat password",type:"password",id:"repeat password",autoComplete:"new-password",value:I,onChange:P}))),o.a.createElement(m.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){if(C===I){var e="".concat(N,"signup?login=").concat(p,"&password=").concat(C);fetch(e,{method:"POST"}).then((function(e){return e.json()})).then((function(e){e.access_token&&v.a.set("token",e.access_token),e.access_token&&a(n.CHAT),v.a.set("userLogin",p)}))}}},"Sign Up"),o.a.createElement(g.a,{container:!0,justify:"flex-end"},o.a.createElement(g.a,{item:!0},o.a.createElement(w.a,{variant:"body2",onClick:function(){return a(n.SIGNIN)},style:{cursor:"pointer"}},"Already have an account? Sign in"))))))}function j(e){var a=e.setPage,t=S(),c=Object(r.useState)(""),i=Object(s.a)(c,2),p=i[0],h=i[1],x=Object(r.useState)(""),O=Object(s.a)(x,2),C=O[0],j=O[1],k=function(e){var a=e.target,t=a.value,n=a.name;"login"===n&&h(t),"password"===n&&j(t)};return o.a.createElement(b.a,{component:"main",maxWidth:"xs"},o.a.createElement(u.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(l.a,{className:t.avatar},o.a.createElement(f.a,null)),o.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"login",value:p,onChange:k})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:C,onChange:k}))),o.a.createElement(m.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){var e="".concat(N,"signin?login=").concat(p,"&password=").concat(C);fetch(e,{method:"POST"}).then((function(e){return e.json()})).then((function(e){e.access_token&&v.a.set("token",e.access_token),e.access_token&&a(n.CHAT),v.a.set("userLogin",p)}))}},"Sign In"),o.a.createElement(g.a,{item:!0},o.a.createElement(w.a,{variant:"body2",onClick:function(){return a(n.SIGNUP)},style:{cursor:"pointer"}},"Don't have an account? Sign Up")))))}var k=t(88),y=t.n(k),I=t(181),W=t(91),P=t(89),T=t(90),A=t.n(T),G=t(182),L=y()(N);function q(e){var a=e.setPage,t=O();L.connect();var c=Object(r.useState)(""),i=Object(s.a)(c,2),p=i[0],f=i[1],h=Object(r.useState)([]),w=Object(s.a)(h,2),N=w[0],x=w[1],S=v.a.get("userLogin");Object(r.useEffect)((function(){return L.emit("messages",JSON.stringify({command:"getAllMessages"}),(function(e){x(e)})),L.on("messages",(function(e){x(e)})),function(){L.disconnect()}}),[]);var C=function(e){var a=e.login,n=e.text,r=e.createdAt,c=Object(I.a)(Object(P.a)(r),"Pp",{locale:W.a});return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.a,{className:t.messageInfo},"".concat(c,", ").concat(a,": ")),o.a.createElement(G.a,{className:t.message},n))};return o.a.createElement(b.a,{component:"main",maxWidth:"sm"},o.a.createElement(m.a,{variant:"outlined",size:"small",className:t.buttonOut,onClick:function(){v.a.set("token",""),v.a.set("userLogin",""),a(n.SIGNIN)}},"Out"),o.a.createElement(u.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(G.a,{className:t.userLogin},S),o.a.createElement(l.a,{className:t.avatar},o.a.createElement(A.a,null)),o.a.createElement(E.a,{component:"h1",variant:"h5"},"Bla-bla-chat"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(G.a,{height:"500px",component:"div",border:"1px solid",borderRadius:"4px",borderColor:"rgba(0, 0, 0, 0.23)",padding:"10px",className:t.messageBox},N.map((function(e){return o.a.createElement(C,{key:e.id,login:e.login,text:e.text,createdAt:e.createdAt})})))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(d.a,{variant:"outlined",required:!0,fullWidth:!0,name:"message",label:"Message",type:"message",id:"message",multiline:!0,value:p,onChange:function(e){var a=e.target,t=a.value;"message"===a.name&&f(t)}}))),o.a.createElement(m.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){L.emit("events",JSON.stringify({command:"createMessage",data:{text:p}})),f("")}},"Send"))))}L.disconnect();var B=function(){var e=Object(r.useState)(n.SIGNIN),a=Object(s.a)(e,2),t=a[0],c=a[1];return Object(r.useEffect)((function(){v.a.get("token")&&c(n.CHAT)}),[]),o.a.createElement(o.a.Fragment,null,t===n.SIGNUP&&o.a.createElement(C,{setPage:c}),t===n.SIGNIN&&o.a.createElement(j,{setPage:c}),t===n.CHAT&&o.a.createElement(q,{setPage:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.16da2566.chunk.js.map