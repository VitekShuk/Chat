(this.webpackJsonpblablachatfe=this.webpackJsonpblablachatfe||[]).push([[0],{102:function(e,a,t){e.exports=t(145)},142:function(e,a){},145:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),c=t(10),i=t.n(c),l=t(14),s=t(184),m=t(177),u=t(180),g=t(178),d=t(48),p=t.n(d),f=t(147),E=t(176),h=t(179);!function(e){e.SIGNIN="SIGNIN",e.SIGNUP="SIGNUP",e.CHAT="CHAT"}(n||(n={}));var b="http://localhost:80/",v=t(173),x=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),w=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",minWidth:"288px"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},buttonOut:{position:"absolute"},messageInfo:{color:"rgba(0, 0, 0, 0.5)"},messageBox:{overflowX:"hidden",overflowY:"auto"},message:{marginBottom:"14px",marginLeft:"10px",marginRight:"10px",maxWidth:"458px",wordWrap:"break-word"},userLogin:{marginLeft:"auto",marginRight:0,fontSize:16}}})),N=t(21),S=t.n(N),O=function(e){var a=e.uri,t=e.login,r=e.setPage,o=e.method;fetch(a,{method:o||"POST"}).then((function(e){return e.json()})).then((function(e){e.access_token&&S.a.set("token",e.access_token),e.access_token&&r(n.CHAT),S.a.set("userLogin",t)}))},C=t(183),j=function(e){var a=e.buttonText,t=e.handleClick,n=x();return o.a.createElement(C.a,{fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:t},a)},k=function(e){var a=e.setPage,t=x(),c=Object(r.useState)(""),i=Object(l.a)(c,2),d=i[0],v=i[1],w=Object(r.useState)(""),N=Object(l.a)(w,2),S=N[0],C=N[1],k=Object(r.useState)(""),I=Object(l.a)(k,2),y=I[0],P=I[1],W="".concat(b).concat("signup","?login=").concat(d,"&password=").concat(S),T=function(e){var a=e.target,t=a.value,n=a.name;"login"===n&&v(t),"password"===n&&C(t),"repeat password"===n&&P(t)};return o.a.createElement(E.a,{component:"main",maxWidth:"xs"},o.a.createElement(m.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(s.a,{className:t.avatar},o.a.createElement(p.a,null)),o.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign up"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"username",value:d,onChange:T})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:S,onChange:T})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"repeat password",label:"Repeat password",type:"password",id:"repeat password",autoComplete:"new-password",value:y,onChange:T}))),o.a.createElement(j,{buttonText:"Sign Up",handleClick:function(){O({uri:W,login:d,setPage:a})}}),o.a.createElement(g.a,{container:!0,justify:"flex-end"},o.a.createElement(g.a,{item:!0},o.a.createElement(h.a,{variant:"body2",onClick:function(){return a(n.SIGNIN)},style:{cursor:"pointer"}},"Already have an account? Sign in"))))))},I=function(e){var a=e.setPage,t=x(),c=Object(r.useState)(""),i=Object(l.a)(c,2),d=i[0],v=i[1],w=Object(r.useState)(""),N=Object(l.a)(w,2),S=N[0],C=N[1],k="".concat(b).concat("signin","?login=").concat(d,"&password=").concat(S),I=function(e){var a=e.target,t=a.value,n=a.name;"login"===n&&v(t),"password"===n&&C(t)};return o.a.createElement(E.a,{component:"main",maxWidth:"xs"},o.a.createElement(m.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(s.a,{className:t.avatar},o.a.createElement(p.a,null)),o.a.createElement(f.a,{component:"h1",variant:"h5"},"Sign in"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"login",value:d,onChange:I})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:S,onChange:I}))),o.a.createElement(j,{buttonText:"Sign In",handleClick:function(){O({uri:k,login:d,setPage:a})}}),o.a.createElement(g.a,{item:!0},o.a.createElement(h.a,{variant:"body2",onClick:function(){return a(n.SIGNUP)},style:{cursor:"pointer"}},"Don't have an account? Sign Up")))))},y=t(88),P=t.n(y),W=t(90),T=t.n(W),A=t(182),G=t(181),L=t(91),q=t(89),B=function(e){var a=e.login,t=e.text,n=e.createdAt,r=w(),c=Object(G.a)(Object(q.a)(n),"Pp",{locale:L.a});return o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{className:r.messageInfo},"".concat(c,", ").concat(a,": ")),o.a.createElement(A.a,{className:r.message},t))},U=P()(b);U.disconnect();var H=function(e){var a=e.setPage,t=w(),c=Object(r.useState)(""),i=Object(l.a)(c,2),d=i[0],p=i[1],h=Object(r.useState)([]),b=Object(l.a)(h,2),v=b[0],x=b[1],N=S.a.get("userLogin");U.connect();return Object(r.useEffect)((function(){return U.emit("messages",JSON.stringify({command:"getAllMessages"}),(function(e){x(e)})),U.on("messages",(function(e){x(e)})),function(){U.disconnect()}}),[]),o.a.createElement(E.a,{component:"main",maxWidth:"sm"},o.a.createElement(C.a,{variant:"outlined",size:"small",className:t.buttonOut,onClick:function(){S.a.set("token",""),S.a.set("userLogin",""),a(n.SIGNIN)}},"Out"),o.a.createElement(m.a,null),o.a.createElement("div",{className:t.paper},o.a.createElement(A.a,{className:t.userLogin},N),o.a.createElement(s.a,{className:t.avatar},o.a.createElement(T.a,null)),o.a.createElement(f.a,{component:"h1",variant:"h5"},"Bla-bla-chat"),o.a.createElement("form",{className:t.form,noValidate:!0},o.a.createElement(g.a,{container:!0,spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(A.a,{height:"500px",component:"div",border:"1px solid",borderRadius:"4px",borderColor:"rgba(0, 0, 0, 0.23)",padding:"10px",className:t.messageBox},v.map((function(e){return o.a.createElement(B,{key:e.id,login:e.login,text:e.text,createdAt:e.createdAt})})))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(u.a,{variant:"outlined",required:!0,fullWidth:!0,name:"message",label:"Message",type:"message",id:"message",multiline:!0,value:d,onChange:function(e){var a=e.target,t=a.value;"message"===a.name&&p(t)}}))),o.a.createElement(j,{buttonText:"Send",handleClick:function(){U.emit("events",JSON.stringify({command:"createMessage",data:{text:d}})),p("")}}))))};var J=function(){var e=Object(r.useState)(n.SIGNIN),a=Object(l.a)(e,2),t=a[0],c=a[1];return Object(r.useEffect)((function(){S.a.get("token")&&c(n.CHAT)}),[]),o.a.createElement(o.a.Fragment,null,t===n.SIGNUP&&o.a.createElement(k,{setPage:c}),t===n.SIGNIN&&o.a.createElement(I,{setPage:c}),t===n.CHAT&&o.a.createElement(H,{setPage:c}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.6cab009e.chunk.js.map